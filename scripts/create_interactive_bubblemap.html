<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ethereum Risk Capabilities - Interactive Bubble Map</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #000000;
            color: #00FF00;
            font-family: 'Courier New', monospace;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #00FF00;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #90EE90;
            margin-bottom: 30px;
        }
        svg {
            background-color: #000000;
            border: 2px solid #00FF00;
            border-radius: 10px;
        }
        .node {
            cursor: pointer;
        }
        .node circle {
            stroke: #00FF00;
            stroke-width: 3px;
        }
        .link {
            stroke: #00FF00;
            stroke-opacity: 0.6;
            stroke-width: 2px;
        }
        .label {
            fill: #FFFFFF;
            font-size: 12px;
            font-weight: bold;
            pointer-events: none;
        }
        .tooltip {
            position: absolute;
            background-color: rgba(0, 0, 0, 0.9);
            border: 2px solid #00FF00;
            border-radius: 5px;
            padding: 10px;
            color: #00FF00;
            font-size: 12px;
            pointer-events: none;
            opacity: 0;
        }
        .legend {
            margin-top: 20px;
            text-align: center;
        }
        .legend-item {
            display: inline-block;
            margin: 0 20px;
        }
        .legend-color {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 1px solid #00FF00;
            margin-right: 5px;
            vertical-align: middle;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Top 3 Risk Capabilities</h1>
        <p class="subtitle">Ethereum Chain-Agnostic Architecture Demonstration</p>
        
        <div id="visualization"></div>
        
        <div class="legend">
            <div class="legend-item">
                <span class="legend-color" style="background-color: #00FF00;"></span>
                <span>Critical (P0)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #90EE90;"></span>
                <span>High (P1)</span>
            </div>
            <div class="legend-item">
                <span class="legend-color" style="background-color: #ADFF2F;"></span>
                <span>Medium (P2)</span>
            </div>
        </div>
    </div>

    <div class="tooltip" id="tooltip"></div>

    <script>
        // Risk data
        const data = {
            "nodes": [
                {
                    "id": "P0",
                    "label": "Chain-Agnostic Architecture\nEnables Market Expansion",
                    "value": 92,
                    "size": 92,
                    "category": "Critical",
                    "confidence": 92,
                    "description": "Chain-agnostic architecture removes blockchain lock-in objections and expands addressable market by 4x.",
                    "color": "#00FF00"
                },
                {
                    "id": "P1",
                    "label": "Ethereum Integration\nDemonstrates EVM Support",
                    "value": 88,
                    "size": 88,
                    "category": "High",
                    "confidence": 88,
                    "description": "Ethereum commitment demonstrates ABC works with EVM-compatible chains, not just Bitcoin.",
                    "color": "#90EE90"
                },
                {
                    "id": "P2",
                    "label": "Multi-Agency Deployment\nScenarios",
                    "value": 75,
                    "size": 75,
                    "category": "Medium",
                    "confidence": 85,
                    "description": "Chain-agnostic architecture enables different agencies to use different chains simultaneously.",
                    "color": "#ADFF2F"
                }
            ],
            "links": [
                {
                    "source": "P0",
                    "target": "P1",
                    "value": 0.9,
                    "label": "EVM Support Enables Market Expansion"
                },
                {
                    "source": "P0",
                    "target": "P2",
                    "value": 0.8,
                    "label": "Multi-Agency Enables Market Expansion"
                },
                {
                    "source": "P1",
                    "target": "P2",
                    "value": 0.7,
                    "label": "EVM Support Enables Multi-Agency"
                }
            ]
        };

        // Set up SVG
        const width = 1000;
        const height = 700;
        const svg = d3.select("#visualization")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        // Create force simulation
        const simulation = d3.forceSimulation(data.nodes)
            .force("link", d3.forceLink(data.links).id(d => d.id).distance(200))
            .force("charge", d3.forceManyBody().strength(-500))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(d => Math.sqrt(d.size) * 3 + 10));

        // Create links
        const link = svg.append("g")
            .selectAll("line")
            .data(data.links)
            .enter().append("line")
            .attr("class", "link")
            .attr("stroke-width", d => d.value * 3);

        // Create nodes
        const node = svg.append("g")
            .selectAll("g")
            .data(data.nodes)
            .enter().append("g")
            .attr("class", "node")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        // Add circles
        node.append("circle")
            .attr("r", d => Math.sqrt(d.size) * 3)
            .attr("fill", d => d.color)
            .attr("opacity", 0.3)
            .attr("stroke", d => d.color)
            .attr("stroke-width", 3);

        // Add labels
        node.append("text")
            .attr("class", "label")
            .attr("text-anchor", "middle")
            .attr("dy", -Math.sqrt(d => d.size) * 3 - 10)
            .text(d => d.label.split('\n')[0])
            .attr("fill", "#FFFFFF");

        node.append("text")
            .attr("class", "label")
            .attr("text-anchor", "middle")
            .attr("dy", 0)
            .text(d => `${d.value}%`)
            .attr("fill", d => d.color)
            .attr("font-size", "24px")
            .attr("font-weight", "bold");

        node.append("text")
            .attr("class", "label")
            .attr("text-anchor", "middle")
            .attr("dy", Math.sqrt(d => d.size) * 3 + 15)
            .text(d => `${d.category} | ${d.confidence}% Confidence`)
            .attr("fill", "#CCCCCC")
            .attr("font-size", "10px");

        // Tooltip
        const tooltip = d3.select("#tooltip");

        node.on("mouseover", function(event, d) {
            tooltip.transition()
                .duration(200)
                .style("opacity", 1);
            tooltip.html(`
                <strong>${d.label}</strong><br/>
                Capability: ${d.value}%<br/>
                Confidence: ${d.confidence}%<br/>
                Priority: ${d.category}<br/>
                <br/>
                ${d.description}
            `)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 10) + "px");
        })
        .on("mouseout", function() {
            tooltip.transition()
                .duration(200)
                .style("opacity", 0);
        });

        // Update positions on simulation tick
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node.attr("transform", d => `translate(${d.x},${d.y})`);
        });

        // Drag functions
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }
    </script>
</body>
</html>

